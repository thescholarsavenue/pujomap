<!DOCTYPE html>
<html>
  <head>
    <title>DP - Places to visit in Kolkata</title>
    <style type="text/css">
      html, body, #googft-mapCanvas {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      }
    </style>
	
	  <style type="text/css">
		  #legend, #title {
		  background: rgba(255,255,255,0.7);
		  padding: 10px;
		  margin: 5px;
		  font-size: 12px;
		  font-family: Arial, sans-serif;
		  }
		  
		  .color {
		  border: 1px solid;
		  height: 12px;
		  width: 12px;
		  margin-right: 3px;
		  float: left;
		  }
		  
		  .red {
		  background: #C00;
		  }
		  
		  .yellow {
		  background: #FF3;
		  }
		  
		  .green {
		  background: #6F0;
		  }
		  
		  .blue {
		  background: #06C;
		  }
		  
		  .purple {
		  background: #63C;
		  }
		  
		  #legend > p:hover{
		  cursor:pointer;	
		  }
	  </style>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">

 	<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            var _gaq=[['_setAccount','UA-39461113-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script> 
    
 <div id="fb-root"></div>

    <script type="text/javascript">
    
    (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

      function initialize() {
      google.maps.visualRefresh = true;
      var map = new google.maps.Map(document.getElementById('googft-mapCanvas'), {
      center: new google.maps.LatLng(22.5551507024882, 88.39278582602536),
      zoom: 12,
      //draggable: false,
      //scrollwheel: false,
      disableDefaultUI: true, //Comment this line to add controls to the display
      mapTypeId: google.maps.MapTypeId.ROADMAP
      });

      layer = new google.maps.FusionTablesLayer({
		  map: map,
		  heatmap: { enabled: false },
		  query: {
			  select: "col2",
			  from: "1UtqJE20NWTkf74IAzZ_m7wBnIHX9CvfDiI5qVIY",
			  where: ""
		  },
		  options: {
			  styleId: 2,
			  templateId: 2
		  }
		});
		
		  //Create the legend and display on the map
		  var legend = document.createElement('div');
		  legend.id = 'legend';
		  var content = [];
		  /*
		  content.push('<h5><b>Pandal Ratings</b></h5>');
		  content.push('<span onclick="updateMap(layer,\'Rating=1\')">1 <img alt="large_red" src="//chart.googleapis.com/chart?chst=d_map_pin_letter&amp;chld=|FF0000"></span>');
		  content.push('<span onclick="updateMap(layer,\'Rating=2\')"> 2 <img alt="large_yellow" src="//chart.googleapis.com/chart?chst=d_map_pin_letter&amp;chld=|FFFF00"></span>');
		  content.push('<span onclick="updateMap(layer,\'Rating=3\')"> 3 <img alt="large_green" src="//chart.googleapis.com/chart?chst=d_map_pin_letter&amp;chld=|00FF00"></span>');
		  content.push('<span onclick="updateMap(layer,\'Rating=4\')"> 4 <img alt="large_blue" src="//chart.googleapis.com/chart?chst=d_map_pin_letter&amp;chld=|6699FF"></span>');
		  content.push('<span onclick="updateMap(layer,\'Rating=5\')"> 5 <img alt="large_purple" src="//chart.googleapis.com/chart?chst=d_map_pin_letter&amp;chld=|9933FF"></span>');
		  */
		  content.push('<h5><b>Legend</b></h5>');
		  content.push('<p onclick="updateMap(layer,\'Rating=4\')"><img alt="large_yellow" src="//chart.googleapis.com/chart?chst=d_map_pin_letter&amp;chld=|FFFF00"> Pandals</p>');
		  content.push('<p onclick="updateMap(layer,\'Rating=6\')"><img src="//storage.googleapis.com/support-kms-prod/SNP_2752125_en_v0" alt="small red map dot" title="small red map dot" width="9" height="9"> Metro stations</p>');
		  content.push('<p onclick="updateMap(layer,\'Rating=7\')"><img src="//storage.googleapis.com/support-kms-prod/SNP_2752068_en_v0" alt="small blue map dot" title="small blue map dot" width="9" height="9"> Bus stands</p>');
		  content.push('<p onclick="updateMap(layer,\'Rating=8\')"><img src="//storage.googleapis.com/support-kms-prod/SNP_2752129_en_v0" alt="small green map dot" title="small green map dot" width="9" height="9"> Landmarks</p>');
		  content.push('<h5 onclick="updateMap(layer,\'\')"><b>Reset view</b></h5>');		  		  
		  legend.innerHTML = content.join('');
		  legend.index = 1;
		  map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);
		  
		  var title = document.createElement('div');
		  title.id = 'title';
		  var content = [];
		  content.push("<h4><b>Go Pandal-hopping this Durga Puja</b></h4>");
		  content.push("<h5><em>A Visualization by The Scholars' Avenue</em></h5>");
		  //content.push('<div class="fb-like" data-href="https://www.facebook.com/thescholarsavenue" data-layout="button" data-action="like" data-show-faces="false" data-share="true"></div>');
		  title.innerHTML = content.join("");
		  title.index = 1;
		  map.controls[google.maps.ControlPosition.LEFT_TOP].push(title);
		  
		  var fb = document.createElement('div');
		  fb.id = 'fb';
		  var content = [];
		  
		  //content.push('<div id="fb-root"></div>');
		  //content.push('<div class="fb-like" data-href="http://thescholarsavenue.github.io/pujomap/" data-width="The pixel width of the plugin" data-height="The pixel height of the plugin" data-colorscheme="light" data-layout="standard" data-action="like" data-show-faces="true" data-send="false"></div>');
		  content.push('<div class="fb-like" data-href="https://www.facebook.com/thescholarsavenue" data-layout="button" data-action="like" data-show-faces="false" data-share="true"></div>');
		  fb.innerHTML = content.join("");
		  fb.index = 1;
		  map.controls[google.maps.ControlPosition.RIGHT_TOP].push(fb);
		    
      }
	  
		function updateMap(layer, whereInput) {
			layer.setOptions({
				query: {
					select: "col2",
					from: "1UtqJE20NWTkf74IAzZ_m7wBnIHX9CvfDiI5qVIY",
					where: whereInput
				}
			});
		}

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>

  </head>

  <body>

    <div id="googft-mapCanvas"></div>
</body>
</html>
